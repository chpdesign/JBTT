#{extends 'main.html' /}
#{set 'title'} - ${torrent.getTitle()}#{/set}

#{set 'moreScripts'}
	<script type="text/javascript" src="/public/javascripts/editor/editor.js"></script>
#{/set}

#{set 'moreStyles'}
	<link rel="stylesheet" href="/public/javascripts/editor/css/editor.css" type="text/css" />
#{/set}

<script type="text/javascript">
	$(document).ready(function() {
		$('textarea[name="comment.content"]:first').editor({});
	});
</script>

<div class="torrent">
	<h2><a href="/torrent/${torrent.getId()}">${torrent.getTitle()}</a></h2>
	<div class="author">Добавил <strong><a href="/user/${torrent.getAuthor()?.getId()}">${torrent.getAuthor()?.getDisplayName()}</a></strong> ${torrent.getCreationDateString()}</div>

	<img class="poster" width="250px" alt="Постер" src="http://animesalvation.com/wp-content/uploads/2010/08/505070.png" />

	<div class="description">
		#{verbatim}
			${torrent.getDescriptionHtml()}
		#{/verbatim}
	</div>
	<div class="clear"></div>

	<div class="footer">
		<ul>
			<li>
				<strong><a href="/torrent/${torrent.getId()}/download">Скачать торрент</a></strong>
			</li>
			<li>
				<strong>Размер:</strong> ${torrent.getTorrentSizeFormatted()}
			</li>
			<li>
				<strong>Метки:</strong>
				#{list torrent.getTags(), as:'tag'}
					<a href="/tag/${tag.getKey()}" class="tag">${tag.getTitle()?.toLowerCase()}</a>
				#{/list}
				<div class="clear"></div>
			</li>
		</ul>
		<div class="clear"></div>
	</div>
</div>


<div id="comments"></div>
	<h3>Комментарии</h3>

	#{verbatim} ${commentsPageNavigation.getHtml()} #{/verbatim}
	<div class="clear"></div>

	<ul class="comments">
	#{list commentsPage.getItems(), as:'comment'}
		<li>
			<div class="author"><strong><a href="/user/${comment.getAccount()?.getId()}">${comment.getAccount()?.getDisplayName()}</a></strong> ${comment.getPostDateString()}</div>
			<div class="content" style="margin-bottom: 15px;">${comment.getContent()}</div>
		</li>
	#{/list}
	</ul>

	#{verbatim} ${commentsPageNavigation.getHtml()} #{/verbatim}
	<div class="clear"></div>

	<div class="new_comment">
		<textarea name="comment.content" style="width: 100%; height: 150px;"></textarea>
	</div>
</div>